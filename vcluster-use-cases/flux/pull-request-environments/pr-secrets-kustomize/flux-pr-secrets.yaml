apiVersion: storage.loft.sh/v1
kind: AccessKey
metadata:
  name: demo-env-admin-access-key
spec:
  displayName: demo-env-admin-access-key
  key: "${accessKey}"
  type: User
  user: admin
---
apiVersion: v1
kind: Secret
metadata:
  name: vcluster-platform-provider-headers
  namespace: p-auth-core
stringData:
  headers: |
    Authorization: Bearer ${accessKey}
---
apiVersion: v1
kind: Secret
metadata:
  name: github-app-secret
  namespace: p-auth-core
  labels:
    loft.sh/project-secret-name: loft-demo-org-cred
data:
---
apiVersion: actions.github.upbound.io/v1alpha1
kind: ActionsSecret
metadata:
  labels:
    testing.upbound.io/example-name: VCLUSTER_PLATFORM_ACCESS_KEY
  name: {REPLACE_REPO_NAME}-access-key
spec:
  deletionPolicy: Delete
  forProvider:
    plaintextValueSecretRef:
      key: accessKey
      name: demo-admin-access-key
      namespace: p-vcluster-flux-demo
    repository: {REPLACE_REPO_NAME}
    secretName: VCLUSTER_PLATFORM_ACCESS_KEY
  initProvider: {}
  managementPolicies:
    - '*'
  providerConfigRef:
    name: github-provider-config
---
apiVersion: actions.github.upbound.io/v1alpha1
kind: ActionsVariable
metadata:
  labels:
    testing.upbound.io/example-name: VCLUSTER_PLATFORM_URL
  name: {REPLACE_REPO_NAME}-vcluster-platform-url
spec:
  deletionPolicy: Delete
  forProvider:
    value: https://{REPLACE_VCLUSTER_NAME}.{REPLACE_BASE_DOMAIN}
    repository: {REPLACE_REPO_NAME}
    variableName: VCLUSTER_PLATFORM_URL
  initProvider: {}
  managementPolicies:
    - '*'
  providerConfigRef:
    name: github-provider-config
